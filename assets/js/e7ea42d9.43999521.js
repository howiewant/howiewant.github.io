"use strict";(self.webpackChunkhowie_blog=self.webpackChunkhowie_blog||[]).push([[2656],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>v});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=n.createContext({}),p=function(e){var t=n.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(i.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(r),v=o,d=u["".concat(i,".").concat(v)]||u[v]||g[v]||a;return r?n.createElement(d,s(s({ref:t},c),{},{components:r})):n.createElement(d,s({ref:t},c))}));function v(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=u;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:o,s[1]=l;for(var p=2;p<a;p++)s[p]=r[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},9043:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>g,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var n=r(7462),o=(r(7294),r(3905));const a={slug:"use-nginx-proxy-geoserver-with-https",title:"\u4f7f\u7528nginx\u4ee3\u7406geoserver\u901a\u8fc7https\u8bbf\u95ee",tags:["geoserver","nginx"]},s=void 0,l={permalink:"/blog/use-nginx-proxy-geoserver-with-https",source:"@site/blog/2023-02-10-use-nginx-proxy-geoserver-with-https.md",title:"\u4f7f\u7528nginx\u4ee3\u7406geoserver\u901a\u8fc7https\u8bbf\u95ee",description:"Nginx \u914d\u7f6e",date:"2023-02-10T00:00:00.000Z",formattedDate:"2023\u5e742\u670810\u65e5",tags:[{label:"geoserver",permalink:"/blog/tags/geoserver"},{label:"nginx",permalink:"/blog/tags/nginx"}],readingTime:.53,hasTruncateMarker:!1,authors:[],frontMatter:{slug:"use-nginx-proxy-geoserver-with-https",title:"\u4f7f\u7528nginx\u4ee3\u7406geoserver\u901a\u8fc7https\u8bbf\u95ee",tags:["geoserver","nginx"]},nextItem:{title:"postgresql\u4e0emysql\u5bf9\u6bd4",permalink:"/blog/postgresql-vs-mysql"}},i={authorsImageUrls:[]},p=[{value:"Nginx \u914d\u7f6e",id:"nginx-\u914d\u7f6e",level:2},{value:"Geoserver\u914d\u7f6e",id:"geoserver\u914d\u7f6e",level:2},{value:"Tomcat\u670d\u52a1\u5668",id:"tomcat\u670d\u52a1\u5668",level:3},{value:"Jetty\u670d\u52a1\u5668",id:"jetty\u670d\u52a1\u5668",level:3}],c={toc:p};function g(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"nginx-\u914d\u7f6e"},"Nginx \u914d\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"server {\n    listen 443 ssl;\n    server_name localhost;\n    ssl_certificate path/to/privatekey;\n    ssl_certificate_key path/to/publickey;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_prefer_server_ciphers on;\n\n    location /geoserver {\n        proxy_pass http://127.0.0.1:8088;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n")),(0,o.kt)("h2",{id:"geoserver\u914d\u7f6e"},"Geoserver\u914d\u7f6e"),(0,o.kt)("p",null,"nginx\u6dfb\u52a0\u7684X-Forwarded\u7cfb\u5217\u8bf7\u6c42\u5934\uff0c\u8fd8\u9700\u8981geoserver\u670d\u52a1\u5668\u652f\u6301"),(0,o.kt)("h3",{id:"tomcat\u670d\u52a1\u5668"},"Tomcat\u670d\u52a1\u5668"),(0,o.kt)("p",null,"server.xml "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<service>\n    <Engine>\n        <Host>\n            \x3c!-- \u52a0\u5165\u4ee5\u4e0b\u914d\u7f6e--\x3e\n            <Valve className="org.apache.catalina.valves.RemoteIpValve" />\n        </Host>\n    </Engine>\n</service>\n')),(0,o.kt)("h3",{id:"jetty\u670d\u52a1\u5668"},"Jetty\u670d\u52a1\u5668"),(0,o.kt)("p",null,"jetty.xml"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<New id="httpConfig" class="org.eclipse.jetty.server.HttpConfiguration">\n    <Call name="addCustomizer">\n        <Arg><New class="org.eclipse.jetty.server.ForwardedRequestCustomizer"/></Arg>\n    </Call>\n</New>\n')))}g.isMDXComponent=!0}}]);