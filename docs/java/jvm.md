# JVM

## Java类加载过程

Java的类加载过程分为三个主要步骤：加载、链接、初始化
### 加载
加载阶段主要是将字节码数据从不同的数据源读到JVM中，并映射为JVM认可的数据结构（Class对象），这里的数据流可以是各种各样的形态，如jar文件、class文件、甚至是网络数据源等；如果输入的数据不是ClassFile的结构，则会抛出ClassFormatError。

加载阶段使用户可以参与的阶段，可以自定义类加载器，实现自己的加载过程

### 链接
这是最核心的步骤，简单的说是吧类定义信息转入JVM运行的过程，这里一共可以分为三步
- 验证，JVM需要核验字节信息是否服务Java虚拟机规范，否则被认为是VerifyError，这样可以防止恶意信息或者不符合规范的信息危害JVM的运行，验证阶段有可能触发更多的类加载
- 准备，创建类或者接口中的静态变量，并初始化静态变量的初始值（原始类型常量在这一步直接初始化完成），这里只要是分配空间，赋予初始值，不会去执行进一步的JVM指令
- 解析，将常量池中的符号引用替换为直接引用，类和接口、字段、类方法、接口方法等各个方面的解析
### 初始化
这一步真正的去执行类初始化的代码逻辑，包括静态字段赋值，类中的静态代码块中的逻辑，父类型的初始化逻辑优先于当前类型的初始化

## 双亲委派模型
当类加载器试图加载一个类是，会先去让父类加载器加载该类，如果父类加载器可以加载则直接加载，无法加载，则再回到最初的子类加载器加载

